
# Database Design

- Database design involves characterizing the specific data needs of the users of the database. The designer needs to interact with domain experts and users to carry out this task. Output is a user requirements specification.

- Then a data model is chosen and accordingly the user requirements are converted to a conceptual schema.

- Two ways to define *how to group* attributes in a database:
	- ER relationships
	- Set of algorithms (normalization), that takes as input the set of all attributes and generates a set of tables. 

after this we get a specification of functional requirements document.

- **Specification of functional requirements:** Users describe kinds of operations that will be performed on the data. 

- This can be reviewed by the designer to ensure all functional requirements are met. 

- Then the logical-design phase takes place when the conceptual schema is mapped to the DBMS that will actually be used, and then the resulting system specific database schema will be used for the physical-design phase.


# Database Engine

- A DB System is partitioned into different modules with their own responsibilities.

- *Storage manager:* Basically manages storage efficiently around disks and memory to minimize the disk <-> memory latency.

- *Query Processor:* Interprets/Translates query language statements into an efficient sequence of operations at the physical level.

- *Transaction Manager:* Allows to treat a sequence of database accesses as if they were a single unit that either happens or does not, by hiding the exact lower level details of concurrent access to the data and of system failures.


## 1.6.1 Storage Manager

- Provides the main interface between application programs sending queries to a DBMS and the low level data which is stored as bytes using file-systems in the OS. 
- Translates those DML statements into low-levl file system commands. 

Contains the:
- Authorization and the Integrity manager: which tests for satisfaction of integrity constraints and checks the authority of the users to access data. 
- Transaction Manager: Which ensures that the Database remains in a consistent state despite system failures, and that concurrent transaction executions proceed without conflicts.  (What is transaction manager doing here? well this is the low level actor of the transaction manager. The actual transaction management defines policies and this is the low level applier of those policies, e.g, locks, etc.)
- File manager: which manages the allocation of space on disk storage and the data structures used to represent information stored on disk.
- Buffer Manager: Which is responsible for fetching data from disk into main memory and deciding what to cache. 

**Structures implemented by the storage manager on the physical layer**:
- Data files, which store the database itself.
- Data dictionary, which stores metadata about the structure of the database. specially, the schema of the database. 
- Indices, which can provide fast access to data items. Pointers to data items with a particular value.

## 1.6.2 The Query Processor

- Includes:
- DDL interpreter, translates DDL and records the definition in the data dictionary.
- DML compiler, converts query language into an evaluation plan consisting of low level instructions that the query-evaluation engine understands, (Steps involved in performing the query). the Evaluation engine then basically executes the plan by calling storage manager functions that actually handle OS level commands.
- **Query Evaluation Engine:** which executes low-level instructions generated by the DML compiler. 

## 1.6.3 Transaction Management

- Many times many operations on the database constitute of 1 unit of logical action altogether. 
- So for that action, either all operations should happen or the action should fail in its entirety. (ATOMICITY)
- Moreover the consistency after the operations should remain preserved. 

- **Transaction** : A set of operations that performs a single logical function in a database application. If the database was consistent when the transaction started (START, COMMIT, ABORT), it must be consistent after it finishes or aborts. 

- There might be necessary inconsistencies in some cases during the transaction itself, which can cause problems if the system encounters  a failure.

- To ensure atomicity, if a transaction fails due to system failure, the database should be unchanged. This consistency with how it was before the transaction started is achieved by detecting system failures and and recover database to the state it was in before the transaction. (Recovery Manger).

- And finally, many concurrent successful transactions may also leave the database inconsistent. Concurrency control manager controls the interaction among the concurrent transactions. 

- These 2 managers together form the **Transaction Manager.**


# Database and Application Architecture


![[Pasted image 20260216194531.png]]
*A combined view of everything that has been discussed so far...*



![[Pasted image 20260216194949.png]]
*2 main types of applications that use databases on the backend*



# Database Users and Administrators

## 1.8.2 Database Admins

- Person with central control over data and the programs the touch the data is a database administrator.
- Functions of a DBA:
	- Schema definition
	- Storage structure and access-method definition
	- Schema and physical-organization modification
	- Granting of authorization for data access.
	- Routine maintenance


> *The End.*
---

