## Complex state

1. Usually state is more complex than just one single integer variable and can be many different things like below:

```jsx
const App = () => {
  const [clicks, setClicks] = useState({
    left: 0, right: 0
  })

  const handleLeftClick = () => {
    const newClicks = { 
      left: clicks.left + 1, 
      right: clicks.right 
    }
    setClicks(newClicks)
  }

  const handleRightClick = () => {
    const newClicks = { 
      left: clicks.left, 
      right: clicks.right + 1 
    }
    setClicks(newClicks)
  }

  return (
    <div>
      {clicks.left}
      <button onClick={handleLeftClick}>left</button>
      <button onClick={handleRightClick}>right</button>
      {clicks.right}
    </div>
  )
}
```

>[!warning] Side note on tailwindcss styling
>All classes must be applied to the jsx tags and not component tags.

2. The above new object assignment can be replaced with the new spread syntax style introduced in 2018 like this:
```jsx
const handleLeftClick = () => {
  const newClicks = { 
    ...clicks, 
    left: clicks.left + 1 
  }
  setClicks(newClicks)
}

const handleRightClick = () => {
  const newClicks = { 
    ...clicks, 
    right: clicks.right + 1 
  }
  setClicks(newClicks)
}
```
`{clicks}` creates a new object that has copies of all of the properties of the clicks object. When we give it a parameter that the original object contained, it will replace the original value with the new one.

3. NEVER EVER modify state variables directly. It is forbidden. Can lead to bad side effects.

---
 We must decide how to organize our state variables to reduce debugging stress. Can refer to this: **[React docs][https://react.dev/learn/choosing-the-state-structure]** for more information.

### Some notes on the above

1. Doing something like this 
```jsx
function Message({ messageColor }) {  

const [color, setColor] = useState(messageColor);
```
can cause confusion because if the parent passes a different color, the state variable color will not be update because it is only updated the first render and that becomes it's initial value.

- If two state variables always update together, consider merging them into one.
- Choose your state variables carefully to avoid creating “impossible” states.
- Structure your state in a way that reduces the chances that you’ll make a mistake updating it.
- Avoid redundant and duplicate state so that you don’t need to keep it in sync.
- Don’t put props _into_ state unless you specifically want to prevent updates.
- For UI patterns like selection, keep ID or index in state instead of the object itself.
- If updating deeply nested state is complicated, try flattening it.

---

### Handling arrays


## Update of the state is asynchronous


